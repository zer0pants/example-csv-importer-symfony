{# templates/import/index.html.twig #}
{% extends 'layout.html.twig' %}

{% block title %}Importer App{% endblock %}
{% block heading %}Create New Import{% endblock %}

{% block page_contents %}
    <div class="row">
        <div class="col">
            {{ form(form) }}
        </div>
    </div>
{% endblock %}


{% block javascripts %}

{# Ref: https://www.codegrepper.com/code-examples/javascript/how+to+show+a+file+name+in+bootstrap+file+input #}
<script type="text/javascript">
    $(document).ready(function() {
        $('input[type="file"]').on("change", function() {
            let filenames = [];
            let files = document.getElementById("import_object").files;
            if (files.length > 1) {
                filenames.push("Total Files (" + files.length + ")");
            } else {
                for (let i in files) {
                    if (files.hasOwnProperty(i)) {
                        filenames.push(files[i].name);
                    }
                }
            }
            $(this)
                .next(".custom-file-label")
                .html(filenames.join(","));
        });
    });
</script>

{% endblock %}